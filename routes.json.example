{
  "routes": [
    {
      "name": "products",
      "ingestionContract": "products.csv.v1",
      "input": {
        "path": "./data/input/products",
        "filenamePattern": "products_.*\\.csv",
        "watchMode": "event",
        "pollIntervalSeconds": 5,
        "maxFilesPerPoll": 5
      },
      "parsing": {
        "hasHeader": true,
        "delimiter": ",",
        "quoteChar": "\"",
        "encoding": "utf-8"
      },
      "output": {
        "type": "queue",
        "destination": "products_queue",
        "includeEnvelope": true
      },
      "archive": {
        "processedPath": "./data/archive/products/processed",
        "failedPath": "./data/archive/products/failed",
        "ignoredPath": "./data/archive/products/ignored"
      }
    },
    {
      "name": "orders",
      "ingestionContract": "orders.csv.v1",
      "input": {
        "path": "./data/input/orders",
        "filenamePattern": "orders_.*\\.csv",
        "watchMode": "hybrid",
        "pollIntervalSeconds": 5,
        "hybridPollIntervalSeconds": 60
      },
      "parsing": {
        "hasHeader": true,
        "delimiter": ","
      },
      "output": {
        "type": "queue",
        "destination": "orders_queue",
        "includeEnvelope": true
      },
      "archive": {
        "processedPath": "./data/archive/orders/processed",
        "failedPath": "./data/archive/orders/failed"
      }
    },
    {
      "name": "accounts",
      "ingestionContract": "accounts.delimited.v1",
      "input": {
        "path": "./data/input/accounts",
        "suffixFilter": ".csv",
        "watchMode": "poll",
        "pollIntervalSeconds": 15
      },
      "parsing": {
        "hasHeader": false,
        "delimiter": "|"
      },
      "output": {
        "type": "file",
        "destination": "./data/output/accounts"
      },
      "archive": {
        "processedPath": "./data/archive/accounts/processed",
        "failedPath": "./data/archive/accounts/failed"
      }
    }
  ]
}
